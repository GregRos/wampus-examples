"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const events_1 = require("events");
const errors_1 = require("../wrappers/errors");
const _ = require("lodash");
/**@internal*/
class RxjsEventAdapter {
    constructor(_source, _selector, _events) {
        this._source = _source;
        this._selector = _selector;
        this._events = _events;
    }
    _initEmitter() {
        if (this._emitter)
            return;
        this._emitter = new events_1.EventEmitter();
        this._sub = this._source.subscribe(data => {
            let event = this._selector(data);
            this._emitter.emit(event.name, event.arg);
        });
    }
    on(name, handler) {
        if (!_.includes(this._events, name)) {
            throw errors_1.Errors.unknownEvent(name);
        }
        this._initEmitter();
        this._emitter.addListener(name, handler);
    }
    off(name, handler) {
        this._emitter.removeListener(name, handler);
    }
}
exports.RxjsEventAdapter = RxjsEventAdapter;
//# sourceMappingURL=rxjs-other.js.map
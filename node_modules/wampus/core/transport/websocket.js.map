{"version":3,"file":"websocket.js","sourceRoot":"","sources":["../../src/core/transport/websocket.ts"],"names":[],"mappings":"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"}
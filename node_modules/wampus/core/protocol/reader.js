"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const messages_1 = require("./messages");
const message_type_1 = require("./message.type");
/**
 * A class that converts a raw WAMP protocol message in the form of an array into a WAMP message object.
 */
class MessageReader {
    /**
     * Parses a raw WAMP message in the form of an array into a message object.
     * @param raw The raw message.
     * @see [WAMP Basic Profile]{@link https://wamp-proto.org/static/rfc/draft-oberstet-hybi-crossbar-wamp.html#message-definitions}
     * @see [WAMP Advanced Profile]{@link https://wamp-proto.org/static/rfc/draft-oberstet-hybi-crossbar-wamp.html#rfc.section.14.1.1}
     */
    parse(raw) {
        switch (raw[0]) {
            case message_type_1.WampType.WELCOME:
                return new messages_1.WampMessage.Welcome(raw[1], raw[2] || {});
            case message_type_1.WampType.ABORT:
                return new messages_1.WampMessage.Abort(raw[1], raw[2] || {});
            case message_type_1.WampType.GOODBYE:
                return new messages_1.WampMessage.Goodbye(raw[1], raw[2]);
            case message_type_1.WampType.ERROR:
                return new messages_1.WampMessage.Error(raw[1], raw[2], raw[3] || {}, raw[4], raw[5] || [], raw[6] || {});
            case message_type_1.WampType.PUBLISHED:
                return new messages_1.WampMessage.Published(raw[1], raw[2]);
            case message_type_1.WampType.SUBSCRIBED:
                return new messages_1.WampMessage.Subscribed(raw[1], raw[2]);
            case message_type_1.WampType.UNSUBSCRIBED:
                return new messages_1.WampMessage.Unsubscribed(raw[1]);
            case message_type_1.WampType.EVENT:
                return new messages_1.WampMessage.Event(raw[1], raw[2], raw[3] || {}, raw[4] || [], raw[5] || {});
            case message_type_1.WampType.RESULT:
                return new messages_1.WampMessage.Result(raw[1], raw[2] || {}, raw[3] || [], raw[4] || {});
            case message_type_1.WampType.REGISTERED:
                return new messages_1.WampMessage.Registered(raw[1], raw[2]);
            case message_type_1.WampType.UNREGISTERED:
                return new messages_1.WampMessage.Unregistered(raw[1]);
            case message_type_1.WampType.INVOCATION:
                return new messages_1.WampMessage.Invocation(raw[1], raw[2], raw[3] || {}, raw[4] || [], raw[5] || {});
            case message_type_1.WampType.CHALLENGE:
                return new messages_1.WampMessage.Challenge(raw[1], raw[2] || {});
            case message_type_1.WampType.INTERRUPT:
                return new messages_1.WampMessage.Interrupt(raw[1], raw[2] || {});
            case message_type_1.WampType.SUBSCRIBE:
                return new messages_1.WampMessage.Subscribe(raw[1], raw[2] || {}, raw[3]);
            case message_type_1.WampType.UNREGISTER:
                return new messages_1.WampMessage.Unregister(raw[1], raw[2]);
            case message_type_1.WampType.PUBLISH:
                return new messages_1.WampMessage.Publish(raw[1], raw[2], raw[3] || {}, raw[4] || [], raw[5] || {});
            case message_type_1.WampType.CALL:
                return new messages_1.WampMessage.Call(raw[1], raw[2], raw[3] || {}, raw[3] || [], raw[5] || {});
            case message_type_1.WampType.REGISTER:
                return new messages_1.WampMessage.Register(raw[1], raw[2] || {}, raw[3]);
            case message_type_1.WampType.HELLO:
                return new messages_1.WampMessage.Hello(raw[1], raw[2] || {});
            case message_type_1.WampType.YIELD:
                return new messages_1.WampMessage.Yield(raw[1], raw[2] || {}, raw[3] || [], raw[4] || {});
            case message_type_1.WampType.AUTHENTICATE:
                return new messages_1.WampMessage.Authenticate(raw[1], raw[2] || {});
            case message_type_1.WampType.CANCEL:
                return new messages_1.WampMessage.Cancel(raw[1], raw[2] || {});
            default:
                return new messages_1.WampMessage.Unknown(raw);
        }
    }
}
exports.MessageReader = MessageReader;
//# sourceMappingURL=reader.js.map